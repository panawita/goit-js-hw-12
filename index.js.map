{"version":3,"file":"index.js","sources":["../src/js/search_app.js"],"sourcesContent":["import 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('form');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMore = document.querySelector('.load-more');\n\nlet page = 1;\nlet userInputGlobal = '';\nlet perPage = 40;\n\niziToast.settings({\n  backgroundColor: '#EF4040',\n  titleColor: '#fff',\n  messageColor: '#fff',\n  progressBarColor: '#B51B1B',\n  position: 'topRight',\n  onOpening: function () {\n    document.querySelector('.iziToast').style.fontFamily =\n      'Montserrat, sans-serif';\n  },\n});\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const userInput = document.querySelector('.search-input').value.trim();\n  if (!userInput) {\n    iziToast.show({\n      message: 'Please enter what you are searching for!',\n    });\n  } else {\n    userInputGlobal = userInput;\n    page = 1;\n    loadMore.style.display = 'none';\n    gallery.innerHTML = '';\n    fetchImages(userInput);\n  }\n});\n\nloadMore.addEventListener('click', () => {\n  page += 1;\n  loadMore.style.display = 'none';\n  fetchImages(userInputGlobal, page);\n});\n\nasync function fetchImages(userInput) {\n  loader.style.display = 'block';\n\n  const params = new URLSearchParams({\n    key: '28729256-3b1de8368afcf00c1bd7e0c48',\n    q: userInput,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: perPage,\n  });\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', { params });\n    const data = response.data;\n\n    loader.style.display = 'none';\n\n    if (data.hits.length === 0 && page === 1) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search phrase. Please try again',\n      });\n    } else {\n      displayImages(data.hits);\n\n      if (data.hits.length < perPage) {\n        loadMore.textContent = 'Sorry, no more results';\n        loadMore.setAttribute('disabled', 'disabled');\n        loadMore.style.display = 'block';\n      } else {\n        loadMore.textContent = 'Load more';\n        loadMore.removeAttribute('disabled');\n        loadMore.style.display = 'block';\n      }\n    }\n  } catch (error) {\n    iziToast.show({\n      title: 'Error.',\n      message: 'Sorry, something went wrong. Please try again.',\n    });\n    console.error(error);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nfunction displayImages(images) {\n  const imageCards = images.map(image => createImageCard(image)).join('');\n  gallery.insertAdjacentHTML('beforeend', imageCards);\n\n  const elemHeight = gallery\n    .querySelector('.gallery-item img')\n    .getBoundingClientRect().height;\n  if (elemHeight) {\n    const scrollDistance = elemHeight * 2;\n    window.scrollBy({\n      top: scrollDistance,\n      behavior: 'smooth',\n    });\n  }\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nfunction createImageCard(image) {\n  return `\n      <div class=\"gallery-item\">\n        <div class=\"gallery-image\"><a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a></div>\n        <div class=\"image-info\">\n          <span><p>Likes:</p> ${image.likes}</span>\n          <span><p>Views:</p> ${image.views}</span>\n          <span><p>Comments:</p> ${image.comments}</span>\n          <span><p>Downloads:</p> ${image.downloads}</span>\n        </div>\n      </div>\n    `;\n}\n"],"names":["form","loader","gallery","loadMore","page","userInputGlobal","perPage","iziToast","event","userInput","fetchImages","params","data","axios","displayImages","error","images","imageCards","image","createImageCard","elemHeight","scrollDistance","SimpleLightbox"],"mappings":"+vBAMA,MAAMA,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,SAAS,cAAc,YAAY,EAEpD,IAAIC,EAAO,EACPC,EAAkB,GAClBC,EAAU,GAEdC,EAAS,SAAS,CAChB,gBAAiB,UACjB,WAAY,OACZ,aAAc,OACd,iBAAkB,UAClB,SAAU,WACV,UAAW,UAAY,CACrB,SAAS,cAAc,WAAW,EAAE,MAAM,WACxC,wBACH,CACH,CAAC,EAEDP,EAAK,iBAAiB,SAAUQ,GAAS,CACvCA,EAAM,eAAc,EACpB,MAAMC,EAAY,SAAS,cAAc,eAAe,EAAE,MAAM,OAC3DA,GAKHJ,EAAkBI,EAClBL,EAAO,EACPD,EAAS,MAAM,QAAU,OACzBD,EAAQ,UAAY,GACpBQ,EAAYD,CAAS,GARrBF,EAAS,KAAK,CACZ,QAAS,0CACf,CAAK,CAQL,CAAC,EAEDJ,EAAS,iBAAiB,QAAS,IAAM,CACvCC,GAAQ,EACRD,EAAS,MAAM,QAAU,OACzBO,EAAYL,CAAqB,CACnC,CAAC,EAED,eAAeK,EAAYD,EAAW,CACpCR,EAAO,MAAM,QAAU,QAEvB,MAAMU,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAML,EACN,SAAUE,CACd,CAAG,EAED,GAAI,CAEF,MAAMM,GADW,MAAMC,EAAM,IAAI,2BAA4B,CAAE,OAAAF,CAAM,CAAE,GACjD,KAEtBV,EAAO,MAAM,QAAU,OAEnBW,EAAK,KAAK,SAAW,GAAKR,IAAS,EACrCG,EAAS,KAAK,CACZ,QACE,0EACV,CAAO,GAEDO,EAAcF,EAAK,IAAI,EAEnBA,EAAK,KAAK,OAASN,GACrBH,EAAS,YAAc,yBACvBA,EAAS,aAAa,WAAY,UAAU,EAC5CA,EAAS,MAAM,QAAU,UAEzBA,EAAS,YAAc,YACvBA,EAAS,gBAAgB,UAAU,EACnCA,EAAS,MAAM,QAAU,SAG9B,OAAQY,EAAO,CACdR,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,gDACf,CAAK,EACD,QAAQ,MAAMQ,CAAK,CACvB,QAAY,CACRd,EAAO,MAAM,QAAU,MACxB,CACH,CAEA,SAASa,EAAcE,EAAQ,CAC7B,MAAMC,EAAaD,EAAO,IAAIE,GAASC,EAAgBD,CAAK,CAAC,EAAE,KAAK,EAAE,EACtEhB,EAAQ,mBAAmB,YAAae,CAAU,EAElD,MAAMG,EAAalB,EAChB,cAAc,mBAAmB,EACjC,sBAAqB,EAAG,OAC3B,GAAIkB,EAAY,CACd,MAAMC,EAAiBD,EAAa,EACpC,OAAO,SAAS,CACd,IAAKC,EACL,SAAU,QAChB,CAAK,CACF,CAEgB,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB,CAEA,SAASH,EAAgBD,EAAO,CAC9B,MAAO;AAAA;AAAA,8CAEqCA,EAAM,aAAa;AAAA,sBAC3CA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,gCAG5BA,EAAM,KAAK;AAAA,gCACXA,EAAM,KAAK;AAAA,mCACRA,EAAM,QAAQ;AAAA,oCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAInD"}